{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst key = \"52826967-21134cff4c4a1edd285b3f00c\";\nexport async function getImagesByQuery(query, page){\n            try{\n                const response = await axios.get(\"https://pixabay.com/api/\", {\n                params:{\n                    key: key,\n                    q: query,\n                    page: page,\n                    per_page: 15,\n                    image_type: \"photo\",\n                    orientation: \"horizontal\",\n                    safesearch: true\n            }\n            })\n            \n                return response.data\n            }catch(error){\n                throw error\n            }\n    }\n\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\")\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\n\nexport function createGallery(images){\n    \n    const markup = images.map((image) =>{\n        return `<li class=\"gallery-list\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"  class=\"image-list\"/>\n        <div class=\"image-info\">\n        \n        <p><span>Likes</span> ${image.likes} </p>\n        <p><span>Views</span> ${image.views} </p>\n        <p><span>Comments</span> ${image.comments} </p>\n        <p><span>Downloads</span> ${image.downloads} </p>\n        </div></a></li>\n        `\n    }).join(\"\")\n    gallery.insertAdjacentHTML(\"beforeend\", markup)\n    lightbox.refresh();\n}\n\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\"); \n}\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function clearGallery(){\n    gallery.innerHTML = \"\"\n}\nexport function hideLoadMoreButton(){\n    loadMore.classList.add(\"hidden-load-more\")\n}\nexport function showLoadMoreButton(){\n    loadMore.classList.remove(\"hidden-load-more\")\n}","import axios from \"axios\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {getImagesByQuery} from \"./js/pixabay-api\";\nimport {showLoader, createGallery, hideLoader, clearGallery, showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\"\nconst form = document.querySelector(\".form\");\nconst loadMore = document.querySelector(\".load-more\");\n\nloadMore.addEventListener(\"click\", onLoadMoreHandler)\nform.addEventListener(\"submit\", onHandlerButton);\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalHits = 0;\n\n\n    hideLoadMoreButton()\n    async function onHandlerButton(event){\n    event.preventDefault()\n    \n        const searhText = event.target.elements[\"search-text\"].value.trim()\n        \n    if(!searhText){\n        iziToast.error({\n                        title: 'Error',\n                        message: 'Please enter a search word!',\n                        position: 'topRight'\n                    })\n                    return\n                }\n                \n    currentQuery = searhText;\n    currentPage = 1;\n    clearGallery()\n    hideLoadMoreButton()\n    showLoader()\n\n    try{\n        const data = await getImagesByQuery(searhText, currentPage)\n            \n            const images = data.hits;\n            totalHits = data.totalHits\n            \n            \n            if(!images || images.length === 0){\n                iziToast.error({\n                        title: 'Error',\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        position: 'topRight'\n                    })\n                    return\n                }\n\n            createGallery(images)\n            \n            \n        if(currentPage * 15 < totalHits){\n            showLoadMoreButton()\n        }  else{\n            hideLoadMoreButton()\n            iziToast.info({\n            title: \"End\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        });\n        }\n            }\n        \n        catch(error) {\n            console.log(\"error\", error);\n            console.log(\"error\", error.message);\n            \n            iziToast.error({\n                        title: 'Error',\n                        message: 'Failed to fetch images. Try again!',\n                        position: 'topRight'\n                    })\n                }\n            \n            finally{\n            hideLoader()\n        }}\n        \n        \n        async function onLoadMoreHandler() {\n            showLoader()\n            currentPage++\n\n            hideLoadMoreButton()\n\n\n        try{\n            const data = await getImagesByQuery(currentQuery, currentPage)\n            const images = data.hits\n\n            createGallery(images)\n\n            const {height: cardHeight} =\n            document.querySelector(\".gallery-list\").getBoundingClientRect();\n\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\"\n            })\n            const perPage = 15;\n            const totalPage = Math.ceil(totalHits / perPage)\n            if(currentPage >= totalPage){\n                hideLoadMoreButton();\n                iziToast.info({\n                    title: \"End\",\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topRight\",\n                });\n            } else{\n                showLoadMoreButton()\n            }\n        } catch(error){\n                    iziToast.error({\n            title: \"Error\",\n            message: \"Failed to load more images.\",\n            position: \"topRight\",\n            });\n        }finally{\n            hideLoader();\n        }\n        \n    \n}\n"],"names":["key","getImagesByQuery","query","page","axios","error","gallery","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","image","showLoader","hideLoader","clearGallery","hideLoadMoreButton","showLoadMoreButton","form","onLoadMoreHandler","onHandlerButton","currentPage","currentQuery","totalHits","event","searhText","iziToast","data","cardHeight","totalPage"],"mappings":"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"}